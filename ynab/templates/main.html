<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>YNAB report</title>
    <style>

        @font-face {
          font-family: 'Lato';
          font-style: normal;
          font-weight: 400;
          src: local('Lato'), url(https://fonts.gstatic.com/s/lato/v14/S6uyw4BMUTPHjx4wXiWtFCc.woff2) format('woff2');
        }

        body{
            font-family: 'Lato';
            font-size: 14px;
            color: #11323C;
            background-color: #559fb3;
        }

        table{
            background-color: #ebf6f9;
            border-right: #e4e7ea solid 1px;
            border-top: #e4e7ea solid 1px;
        }

        td{
            spacing: 0;
            text-align: right;
            padding: 4px;
            padding-top: 10px;
            padding-bottom: 10px;
            padding-left: 7px;
{#            border-left: #e4e7ea solid 1px;#}
            border-left: #e4e7ea solid 0px;
            border-bottom: #e4e7ea solid 1px;
{#            border-bottom: #e4e7ea solid 0px;#}
        }


        .header{
            font-weight: bold;
            color: white;
            background-color: #163a47;
        }

{#        span{#}
{#            border: double #11323C 1px;#}
{#        }#}

        .col_header{
            color: black;
        }

        .increased{
            text-align: left;
            color: indianred;
        }

        .decreased{
            text-align: left;
            color: rgba(9, 225, 24, 0.87);
        }

        .amount{
            float: right;
            font-size: smaller;
            color: #b4b7b9;
        }
    </style>
</head>
<body>


    <table border="0" cellspacing="0">
    {% for row in report_weeks %}
        {# Categories in rows #}
        <tr>
        {% set row_num=loop.index %}
        {%  set amount = 0 %}
        {% for cell in row %}
            {% set col_num = loop.index %}

            {% if row_num == 1 %}
                {% set _class="header" %}
            {% elif col_num == 1 %}
                {% set _class="col_header" %}
            {% endif %}


{#            <td class="{{ _class }}">#}
                {% set prev_cell = loop.previtem %}

                {% if prev_cell is number %}
                    {% set diff = cell | abs - prev_cell | abs %}
                    {%  if diff > 0 %}
                        {% set cell_class = 'increased' %}
                    {% elif diff < 0 %}
                        {% set cell_class = 'decreased' %}
                    {% endif %}

                    <td class="{{ _class }}"><span class="{{ cell_class }}">{{ diff | abs}}</span></td>
                    <td class="{{ _class }}"><span class="amount">{{ cell }}</span></td>

                {% else %}
                    <td colspan="2" class="{{ _class }}"><div class="caption">{{ cell }}</div></td>
                {% endif %}
{#            </td>#}
            {% set amount = cell %}

        {% endfor %}
        </tr>
    {% endfor %}
    </table>
</body>
</html>